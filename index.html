<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IPTV Premium</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: white;
    }
    header {
      display: flex;
      align-items: center;
      padding: 10px;
      background: #1e1e1e;
    }
    header img {
      height: 40px;
      margin-right: 10px;
    }
    header h1 {
      margin: 0;
      font-size: 20px;
    }
    .player-container {
      position: relative;
      width: 100%;
      max-height: 360px;
    }
    video {
      width: 100%;
      max-height: 100%;
    }
    .channel-grid {
      display: flex;
      overflow-x: auto;
      padding: 10px;
    }
    .channel-tile {
      min-width: 120px;
      margin-right: 10px;
      background: #222;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
    }
    .channel-tile:hover {
      background: #444;
    }
    .favorites-toggle {
      margin-left: auto;
      margin-right: 20px;
    }
    .theme-toggle {
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo">
    <h1>IPTV Premium</h1>
    <button class="favorites-toggle">‚ù§Ô∏è Favorites</button>
    <button class="theme-toggle">üåì Theme</button>
  </header>  <div class="player-container">
    <video id="player" controls autoplay></video>
  </div>  <div class="channel-grid" id="channelGrid">
    <!-- Dynamically loaded channels -->
  </div>  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>  <script>
    const player = document.getElementById('player');
    const grid = document.getElementById('channelGrid');
    const favoritesToggle = document.querySelector('.favorites-toggle');
    const themeToggle = document.querySelector('.theme-toggle');
    const channels = [
      { id: 1, name: "Channel 1", url: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8" },
      { id: 2, name: "Channel 2", url: "https://test-streams.mux.dev/test_001/stream.m3u8" },
      { id: 3, name: "Channel 3", url: "https://test-streams.mux.dev/bbb/stream.m3u8" },
    ];

    let currentChannel = localStorage.getItem('lastChannel') || channels[0].url;
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

    function loadChannels(showFavorites = false) {
      grid.innerHTML = '';
      (showFavorites ? channels.filter(c => favorites.includes(c.id)) : channels)
        .forEach(channel => {
          const div = document.createElement('div');
          div.className = 'channel-tile';
          div.innerText = channel.name;
          div.onclick = () => playChannel(channel);
          grid.appendChild(div);
        });
    }

    function playChannel(channel) {
      player.src = channel.url;
      localStorage.setItem('lastChannel', channel.url);
      addToHistory(channel);
    }

    function addToHistory(channel) {
      let history = JSON.parse(localStorage.getItem('watchHistory')) || [];
      history.push({ id: channel.id, name: channel.name, time: new Date().toISOString() });
      localStorage.setItem('watchHistory', JSON.stringify(history));
    }

    favoritesToggle.onclick = () => {
      const showFavs = favoritesToggle.innerText.includes('‚ù§Ô∏è');
      favoritesToggle.innerText = showFavs ? 'All Channels' : '‚ù§Ô∏è Favorites';
      loadChannels(showFavs);
    };

    themeToggle.onclick = () => {
      const dark = document.body.style.backgroundColor === 'white';
      document.body.style.backgroundColor = dark ? '#121212' : 'white';
      document.body.style.color = dark ? 'white' : 'black';
    };

    // Resume last played
    player.src = currentChannel;

    // Swipe left/right for channels
    document.addEventListener('keydown', e => {
      let index = channels.findIndex(c => c.url === player.src);
      if (e.key === 'ArrowRight') {
        let next = (index + 1) % channels.length;
        playChannel(channels[next]);
      } else if (e.key === 'ArrowLeft') {
        let prev = (index - 1 + channels.length) % channels.length;
        playChannel(channels[prev]);
      }
    });

    loadChannels();
  </script></body>
</html>
